% !TeX program = lualatex

\documentclass{article}
% \documentclass{minimal}
\usepackage[
    paperwidth=63mm, 
    paperheight=88mm,
    margin=0mm,
]{geometry}
\setlength\parindent{0pt}
\setlength{\parskip}{2mm}

% the cmyk option makes it convert rgb color to cmyk space
% this makes the pdf output look more "realistic", but less vibrant
% \usepackage[cmyk]{xcolor}
\usepackage{xcolor}

% makes lua stuff easier
\usepackage{luacode}

% for \NewDocumentCommand
\usepackage{xparse}

% for filler text
\usepackage{lipsum}

% for getting the current date
\usepackage[datesep=/]{datetime2}
\DTMsetdatestyle{mmddyy}

% for textboxes
% this also pulls in tikz as a dependency
\usepackage[fitting, skins]{tcolorbox}
\usetikzlibrary{backgrounds}
\usetikzlibrary{fit}

% for length maths shenanigans
\usepackage{calc}

% for tables stuff
\usepackage{tabularx}
\usepackage{array}

% for outlined text
\usepackage{pdfrender}

% for scaling things
\usepackage{scalerel}

% this gets rid of a bunch of font scaling warnings 
% by replacing the standard fonts with scalable versions
\usepackage{lmodern}

% for better conditionals
\usepackage{ifthen}
\usepackage{etoolbox}

% for landscape pages
\usepackage{pdflscape}

% load fonts
\usepackage{fontspec}
\newfontfamily\bodyfont{CrimsonPro-Regular}[
    Path           = "fonts/Crimson_Pro/",
    Extension      = .ttf,
    Ligatures      = TeX,
    Numbers        = Monospaced,
    BoldFont       = CrimsonPro-Bold,
    ItalicFont     = CrimsonPro-Italic,
    BoldItalicFont = CrimsonPro-BoldItalic,
    FontFace       = {sb}{n}{CrimsonPro-SemiBold},
    FontFace       = {sb}{it}{CrimsonPro-SemiBoldItalic},
]
\newfontfamily\titlefont{Grenze-Regular}[
    Path           = "fonts/Grenze/",
    Extension      = .ttf,
    Ligatures      = TeX,
    BoldFont       = Grenze-Bold,
    ItalicFont     = Grenze-Italic,
    BoldItalicFont = Grenze-BoldItalic,
    FontFace       = {sb}{n}{Grenze-SemiBold},
    FontFace       = {sb}{it}{Grenze-SemiBoldItalic},
]

% semibold commands
\DeclareOldFontCommand{\sbseries}{\fontseries{sb}\selectfont}{\mathbf}
\DeclareTextFontCommand{\textsb}{\sbseries}




\begin{document}

% my custom textbox command
\include{latex/textbox.tex}

% helpers for file splitting / output shenanigans
\include{latex/output-helpers.tex}

% affinities stuff
\include{latex/affinities.tex}

% card rendering code
\include{latex/card-helpers.tex}
\include{latex/card.tex}
\include{latex/path-card.tex}

    % \setpath{Fireheart}{000000}{000000}
    \setpath{Fireheart}

    \pathcard[%
        name={Fireheart},
        color-left=000000,
        color-right=000000,
    ]{%
            \pathrow[%
                name={Fireheart Ascension},
            ]%
            \addtolength{\yoffset}{8mm}%
            \pathrow[%
                name={Fiery Aura},
            ]%
            \addtolength{\yoffset}{8mm}%
            \pathrow[%
                name={Immolation},
            ]%
            \addtolength{\yoffset}{8mm}%
            \pathrow[%
                name={Walk Among Flames},
            ]%
            \addtolength{\yoffset}{8mm}%
            \pathrow[%
                name={Lava Axe},
            ]%
            \addtolength{\yoffset}{8mm}%
            \pathrow[%
                name={Bright-Burning Authenticity},
            ]%
            \addtolength{\yoffset}{8mm}%
            \pathrow[%
                name={Pyre Meditation},
            ]%
            \addtolength{\yoffset}{8mm}%
            \pathrow[%
                name={Defiant Fury},
            ]%
            \addtolength{\yoffset}{8mm}%
            \pathrow[%
                name={Set Ablaze},
            ]%
            \addtolength{\yoffset}{8mm}%
    }

                \card[%
                    name={Set Ablaze},
                    cost={X},
                    starter,
                    %affinities
                    text={%
                        \attack{2} If a move card blocks me, ruin it. \textit{(When a ruined card leaves play, banish it.)}%
                    },
                ]
                \card[%
                    name={Defiant Fury},
                    cost={},
                    starter,
                    %affinities
                    text={%
                        Invoke. If your opponent has three or more points: \thinparbreak \attack{2}%
                    },
                ]
                \card[%
                    name={Pyre Meditation},
                    cost={},
                    starter,
                    sequence,
                    %affinities
                    text={%
                        \sequence [Gain one inspiration.] [Your attacks get +2 attack power this turn.]%
                    },
                ]
                \card[%
                    name={Bright-Burning Authenticity},
                    cost={},
                    starter,
                    inspiration,
                    %affinities
                    text={%
                        I can only be played when the match begins as face-down inspiration.%
                    },
                ]
                \card[%
                    name={Lava Axe},
                    cost={},
                    item,
                    %affinities
                    text={%
                        At the start of each turn, if either player has three or more points, your attacks get +1 power this turn. If both players have three or more points, they get +2 power instead.%
                    },
                ]
                \card[%
                    name={Walk Among Flames},
                    cost={},
                    oneshot,
                    %affinities
                    text={%
                        Your opponent conjures Immolation into play. You gain two inspiration and get an additional action next turn.%
                    },
                ]
                \card[%
                    name={Immolation},
                    cost={},
                    %affinities
                    linked={Walk Among Flames},
                    text={%
                        \attack{2}%
                    },
                ]
                \card[%
                    name={Fiery Aura},
                    cost={X},
                    sequence,
                    %affinities
                    text={%
                        \sequence [Once this turn, when I see you being attacked: \thinparbreak \attack{2}] [Same effect as first turn.] [Same effect as first turn.]%
                    },
                ]
                \card[%
                    name={Fireheart Ascension},
                    cost={X},
                    ascension,
                    %affinities
                    linked={{}},
                    text={%
                        \attack{3} \attack{3}%
                    },
                ]



\end{document} 
